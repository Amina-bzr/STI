{% extends 'base.html' %}
  {% load static %}


  <!--external css-->
  {% block css %}
  <link type="text/css" href="{% static 'lib/font-awesome/css/font-awesome.css' %}" rel="stylesheet" />
  <link type="text/css" href="{% static 'lib/advanced-datatable/css/demo_page.css' %}" rel="stylesheet" />
  <link type="text/css" href="{% static 'lib/advanced-datatable/css/demo_table.css' %}" rel="stylesheet" />
  <link rel="stylesheet" href="{% static 'lib/advanced-datatable/css/DT_bootstrap.css' %}" />
  {% endblock %}

  <!--SSOURCE: -->
  <!-- =======================================================
    Template Name: Dashio
    Template URL: https://templatemag.com/dashio-bootstrap-admin-template/
    Author: TemplateMag.com
    License: https://templatemag.com/license/
  ======================================================= -->

 {% block content %}    
 
      
      <section class="wrapper">
        <h3><i class="fa fa-angle-right"></i> Table des {{ objet }}</h3> <!--vlan ou switch-->
       
        <div class="row mb">
          <!-- page start-->
          <div class="content-panel">
            <div class="adv-table">
              <table cellpadding="0" cellspacing="0" border="0" class="display table table-bordered" id="hidden-table-info">
                <thead>
                  <tr>
                    {% for col in colsp %}
                    <th>{{ col }}</th>
                    {% endfor %}
                  </tr>
                </thead>
                <tbody>
                  {% for s in objets %}

                    {% if objet == 'switchs' %}
                      <tr class="gradeA">
                        <td>{{ s.nom }}</td>  
                        <td>{{ s.bloc }}</td>  
                        <td>{{ s.armoire }}</td>  
                        <td>{{ s.local }}</td>  
                        <td>{{ s.preced }}</td>  
                      </tr>
                    {% endif %}

                    {% if objet == "vlans" %}
                      <tr class="gradeA">
                        <td>{{ s.num_Vlan }}</td>  
                        <td>{{ s.nom }}</td>  
                        <td>{{ s.ip }}</td>  
                        <td>{{ s.masque }}</td>  
                        <td>{{ s.passerelle }}</td>  
                      </tr>
                    {% endif %}

                    {% if objet == "ports" %}
                      <tr class="gradeA">
                        <td>{{ s.num_port }}</td>  
                        <td>{{ s.type_port }}</td>  
                        <td>{{ s.etat }}</td>  
                        <td>{{ s.vlan_associe }}</td>  
                        <td>{{ s.elm_suiv }}</td>  
                      </tr>
                    {% endif %}

                    {% if objet == "modèles" %}
                      <tr class="gradeA">
                        <td>{{ s.nom }}</td>  
                        <td>{{ s.nbr_port }}</td>  
                        <td>{{ s.nbr_port_FE }}</td>  
                        <td>{{ s.nbr_port_GE }}</td>  
                        <td>{{ s.nbr_port_SFP }}</td>  
                      </tr>
                    {% endif %}
                  {% endfor %}
                </tbody>
              </table>
            </div>
          </div>
          <!-- page end-->
        </div>
        <!-- /row -->
      </section>
      <!-- /wrapper -->    
  {% endblock %}

  {% block js %}
    <script type="text/javascript" language="javascript" src="{% static 'lib/advanced-datatable/js/jquery.js' %}"></script>
    <script type="text/javascript" language="javascript" src="{% static 'lib/advanced-datatable/js/jquery.dataTables.js' %}"></script>
    <script type="text/javascript" src="{% static 'lib/advanced-datatable/js/DT_bootstrap.js' %}"></script>
    
    
    {% if objet == "switchs" %}
    <script type="text/javascript">
      /* Formating function for row details */
      function fnFormatDetails(oTable, nTr) {
        var aData = oTable.fnGetData(nTr);
        var sOut = '<table cellpadding="5" cellspacing="0" border="0" style="padding-left:50px;">';
        sOut += '<tr><td>Numero de Serie:</td><td>{{ s.inventaire }}</td></tr>';
        sOut += '<tr><td>Adresse MAC:</td><td>{{ s.mac }}</td></tr>';
        sOut += '<tr><td>Modèle:</td><td> {{ s.modele }}</td></tr>';
        sOut += '</table>';

        return sOut;
      }

      $(document).ready(function() {
        /*
        * Insert a 'details' column to the table
        */
        var nCloneTh = document.createElement('th');
        var nCloneTd = document.createElement('td');
        nCloneTd.innerHTML = "<img src='{% static 'lib/advanced-datatable/images/details_open.png' %}'>";
        nCloneTd.className = "center";

        $('#hidden-table-info thead tr').each(function() {
          this.insertBefore(nCloneTh, this.childNodes[0]);
        });

        $('#hidden-table-info tbody tr').each(function() {
          this.insertBefore(nCloneTd.cloneNode(true), this.childNodes[0]);
        });

        /*
        * Initialse DataTables, with no sorting on the 'details' column
        */
        var oTable = $('#hidden-table-info').dataTable({
          "aoColumnDefs": [{
            "bSortable": false,
            "aTargets": [0]
          }],
          "aaSorting": [
            [1, 'asc']
          ]
        });

        /* Add event listener for opening and closing details
        * Note that the indicator for showing which row is open is not controlled by DataTables,
        * rather it is done here
        */
        $('#hidden-table-info tbody td img').live('click', function() {
          var nTr = $(this).parents('tr')[0];
          if (oTable.fnIsOpen(nTr)) {
            /* This row is already open - close it */
            this.src = "{% static 'lib/advanced-datatable/images/details_open.png' %}";
            oTable.fnClose(nTr);
          } else {
            /* Open this row */
            this.src = '{% static "lib/advanced-datatable/images/details_close.png" %}';
            oTable.fnOpen(nTr, fnFormatDetails(oTable, nTr), 'details');
          }
        });
      });
    </script>

   
  {% endif %}

 {% endblock %}